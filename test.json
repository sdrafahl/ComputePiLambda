{"AWSTemplateFormatVersion":"2010-09-09","Description":"Outputs Pi","Resources":{"ServerlessRestApiDeployment8fd23b284f":{"Type":"AWS::ApiGateway::Deployment","Properties":{"RestApiId":{"Ref":"ServerlessRestApi"},"Description":"RestApi deployment id: 8fd23b284f87abb632adffd150c67364ed5be2f3","StageName":"Stage"}},"ComputePiMyTimeApiPermissionProd":{"Type":"AWS::Lambda::Permission","Properties":{"Action":"lambda:invokeFunction","Principal":"apigateway.amazonaws.com","FunctionName":{"Ref":"ComputePi"},"SourceArn":{"Fn::Sub":["arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${__ApiId__}/${__Stage__}/GET/ComputePi",{"__Stage__":"Prod","__ApiId__":{"Ref":"ServerlessRestApi"}}]}}},"LambdaPermission":{"Type":"AWS::Lambda::Permission","Properties":{"Action":"lambda:InvokeFunction","FunctionName":{"Fn::GetAtt":["ComputePi","Arn"]},"Principal":"apigateway.amazonaws.com"}},"ComputePiRole":{"Type":"AWS::IAM::Role","Properties":{"ManagedPolicyArns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"AssumeRolePolicyDocument":{"Version":"2012-10-17","Statement":[{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]}}]}}},"ComputePiMyTimeApiPermissionTest":{"Type":"AWS::Lambda::Permission","Properties":{"Action":"lambda:invokeFunction","Principal":"apigateway.amazonaws.com","FunctionName":{"Ref":"ComputePi"},"SourceArn":{"Fn::Sub":["arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${__ApiId__}/${__Stage__}/GET/ComputePi",{"__Stage__":"*","__ApiId__":{"Ref":"ServerlessRestApi"}}]}}},"ServerlessRestApiProdStage":{"Type":"AWS::ApiGateway::Stage","Properties":{"DeploymentId":{"Ref":"ServerlessRestApiDeployment8fd23b284f"},"RestApiId":{"Ref":"ServerlessRestApi"},"StageName":"Prod"}},"ComputePi":{"Type":"AWS::Lambda::Function","Properties":{"Handler":"index.handler","Code":{"S3Bucket":"codepipeline-us-east-2-588194207253","S3Key":"20f57db0b48c42eb24c63c4b457a68e6"},"Role":{"Fn::GetAtt":["ComputePiRole","Arn"]},"Runtime":"nodejs6.10","Tags":[{"Value":"SAM","Key":"lambda:createdBy"}]}},"ServerlessRestApi":{"Type":"AWS::ApiGateway::RestApi","Properties":{"Body":{"info":{"version":"1.0","title":{"Ref":"AWS::StackName"}},"paths":{"/ComputePi":{"get":{"x-amazon-apigateway-integration":{"httpMethod":"POST","type":"aws_proxy","uri":{"Fn::Sub":"arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${ComputePi.Arn}/invocations"}},"responses":{}}}},"swagger":"2.0"}}}}}
